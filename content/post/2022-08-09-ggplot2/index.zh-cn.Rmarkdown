---
title: ä½¿ç”¨ggplot2ç”»å¤šå˜é‡åˆ†ç»„ç‚¹çº¿å›¾
author: guoguo
date: '2022-08-09'
slug: index.zh-cn
categories:
  - æ•°æ®å¯è§†åŒ–
tags:
  - R
  - ggplot2
  - line plot
  - point plot
lastmod: '2022-08-17T19:26:28+08:00'
keywords: []
description: ''
comment: yes
toc: no
autoCollapseToc: no
contentCopyright: no
reward: yes
mathjax: yes
---

<p style="text-indent:2em;font-size:;font-family:;">
è®°å½•æ•°æ®åˆ†æä¸­å¸¸ç”¨åˆ°çš„ç‚¹çº¿å›¾åœ¨Rä¸­çš„ç”»æ³•ã€‚é’ˆå¯¹yå€¼çš„ä¸åŒè®¡ç®—æ–¹æ³•ï¼Œæœ‰ä¸¤ç§ç”»æ³•ï¼Œä¸€ç§æ˜¯å•ç‹¬è®¡ç®—å‡ºæ‰€éœ€è¦å±•ç¤ºå˜é‡çš„yå€¼ï¼Œå¦‚å¹³å‡å€¼ï¼›ä¸€ç§æ˜¯ç›´æ¥ä½¿ç”¨ggplot2ä¸­è‡ªå¸¦çš„stat_summary()å‡½æ•°ç›´æ¥è®¡ç®—ä¸­åˆå§‹æ•°æ®ä¸­çš„yå€¼ã€‚ä¸¤ç§æ–¹æ³•éƒ½å¯ä»¥ç”»å‡ºæ¼‚äº®çš„ç‚¹çº¿å›¾ğŸ’¯ã€‚
</p>

<!--more-->

```{r message=FALSE, warning=FALSE}
# load packages
library(tidyverse)

# using ggplot2 dataset ~ diamonds
head(diamonds) %>%
  flextable::flextable()
```

```{r}
# wider data to long data
data <- diamonds %>%
  select(2:3, 5:7) %>%
  pivot_longer(c(depth, table, price), names_to = "variables", values_to = "values")

head(data) %>%
  flextable::flextable()

summary_data <- data %>%
  group_by(cut, color, variables) %>%
  rstatix::get_summary_stats(values, type = "mean_sd") 
summary_data %>%
  head() %>%
  flextable::flextable()

```

```{r}
# åŒå˜é‡cutå’Œcoloråˆ†ç»„ç‚¹çº¿å›¾~æ–¹æ³•1
ggplot(summary_data, aes(x = cut, y = mean, group = 1)) +
  geom_line() +
  geom_point(aes(color=cut)) +
  facet_grid(variables~color, scales = "free") +
  theme_minimal() +
  ggsci::scale_color_aaas() +
  theme(axis.text.x = element_text(angle = 90, hjust = 1),
        legend.position="bottom")
```

```{r}
# åŒå˜é‡cutå’Œcoloråˆ†ç»„ç‚¹çº¿å›¾~æ–¹æ³•2
data %>% 
  ggplot(aes(x = cut, y = values, col = cut, group = 1)) +
  stat_summary(fun = "mean", geom = "point") +
  stat_summary(fun = "mean", geom = "line") +
  #scale_color_manual("cut", values = c('slategray', 'rosybrown', 'darkred', 'gold', '#08306B')) +
  facet_grid(variables~color, scales = "free") +
  theme_minimal() +
  ggsci::scale_color_aaas() +
  theme(axis.text.x = element_text(angle = 90, hjust = 1),
        legend.position="bottom")
```
